{"abi":[{"type":"function","name":"getPositionKey","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"symbol","type":"bytes32","internalType":"bytes32"},{"name":"marginToken","type":"address","internalType":"address"},{"name":"isCrossMargin","type":"bool","internalType":"bool"}],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"pure"},{"type":"event","name":"PositionUpdateEvent","inputs":[{"name":"requestId","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"positionKey","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"from","type":"uint8","indexed":false,"internalType":"enum Position.PositionUpdateFrom"},{"name":"position","type":"tuple","indexed":false,"internalType":"struct Position.Props","components":[{"name":"key","type":"bytes32","internalType":"bytes32"},{"name":"symbol","type":"bytes32","internalType":"bytes32"},{"name":"isLong","type":"bool","internalType":"bool"},{"name":"isCrossMargin","type":"bool","internalType":"bool"},{"name":"account","type":"address","internalType":"address"},{"name":"marginToken","type":"address","internalType":"address"},{"name":"indexToken","type":"address","internalType":"address"},{"name":"qty","type":"uint256","internalType":"uint256"},{"name":"entryPrice","type":"uint256","internalType":"uint256"},{"name":"leverage","type":"uint256","internalType":"uint256"},{"name":"initialMargin","type":"uint256","internalType":"uint256"},{"name":"initialMarginInUsd","type":"uint256","internalType":"uint256"},{"name":"initialMarginInUsdFromBalance","type":"uint256","internalType":"uint256"},{"name":"holdPoolAmount","type":"uint256","internalType":"uint256"},{"name":"positionFee","type":"tuple","internalType":"struct Position.PositionFee","components":[{"name":"closeFeeInUsd","type":"uint256","internalType":"uint256"},{"name":"openBorrowingFeePerToken","type":"uint256","internalType":"uint256"},{"name":"realizedBorrowingFee","type":"uint256","internalType":"uint256"},{"name":"realizedBorrowingFeeInUsd","type":"uint256","internalType":"uint256"},{"name":"openFundingFeePerQty","type":"int256","internalType":"int256"},{"name":"realizedFundingFee","type":"int256","internalType":"int256"},{"name":"realizedFundingFeeInUsd","type":"int256","internalType":"int256"}]},{"name":"realizedPnl","type":"int256","internalType":"int256"},{"name":"lastUpdateTime","type":"uint256","internalType":"uint256"}]},{"name":"settleData","type":"tuple","indexed":false,"internalType":"struct Position.SettleData","components":[{"name":"executePrice","type":"uint256","internalType":"uint256"},{"name":"openFee","type":"uint256","internalType":"uint256"},{"name":"marginTokenPrice","type":"uint256","internalType":"uint256"},{"name":"settledMargin","type":"int256","internalType":"int256"},{"name":"settledBorrowingFee","type":"uint256","internalType":"uint256"},{"name":"settledBorrowingFeeInUsd","type":"uint256","internalType":"uint256"},{"name":"settledFundingFee","type":"int256","internalType":"int256"},{"name":"settledFundingFeeInUsd","type":"int256","internalType":"int256"},{"name":"unHoldPoolAmount","type":"uint256","internalType":"uint256"},{"name":"closeFee","type":"uint256","internalType":"uint256"},{"name":"closeFeeInUsd","type":"uint256","internalType":"uint256"},{"name":"realizedPnl","type":"int256","internalType":"int256"},{"name":"poolPnlToken","type":"int256","internalType":"int256"}]}],"anonymous":false},{"type":"error","name":"PositionNotExists","inputs":[]}],"bytecode":{"object":"0x610979610039600b82828239805160001a607314602c57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe730000000000000000000000000000000000000000301460806040526004361061009d5760003560e01c8063a51dafc711610070578063a51dafc714610191578063d06e0fe0146101a4578063f013b695146101c4578063f0350799146101eb578063f8d1ead6146101fc57600080fd5b80631a4c9a98146100a25780632ead7fcf146100c457806353dd3c54146100e45780636b38d0761461016b575b600080fd5b8180156100ae57600080fd5b506100c26100bd366004610548565b61020f565b005b8180156100d057600080fd5b506100c26100df366004610630565b61028a565b8180156100f057600080fd5b506100c26100ff36600461066d565b60006005820181905560068201819055600782018190556008820181905560098201819055600a8201819055600b8201819055600c820181905560138201819055600d8201819055600e8201819055600f82018190556010820181905560118201819055601290910155565b61017e61017936600461069d565b61035a565b6040519081526020015b60405180910390f35b6100c261019f36600461066d565b610374565b8180156101b057600080fd5b506100c26101bf3660046106f1565b61039c565b6101db6101d236600461066d565b60050154151590565b6040519015158152602001610188565b61017e6101f936600461066d565b90565b61017e61020a36600461069d565b61047a565b6002840154600185015460038601547fee2b9c77532fd89e66e2f431c2001e4bcc30fb5bc62ee9cdac252f89540067ae928692610268926001600160a01b0362010000840481169391169060ff6101009091041661047a565b84878560405161027c959493929190610738565b60405180910390a150505050565b6002840154600185015460038601547fee2b9c77532fd89e66e2f431c2001e4bcc30fb5bc62ee9cdac252f89540067ae9286926102e3926001600160a01b0362010000840481169391169060ff6101009091041661047a565b8487604051806101a001604052808781526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525060405161027c959493929190610738565b600061036b6101f98686868661047a565b95945050505050565b806005015460000361039957604051634a32858f60e01b815260040160405180910390fd5b50565b6002850154600186015460038701547fee2b9c77532fd89e66e2f431c2001e4bcc30fb5bc62ee9cdac252f89540067ae9287926103f5926001600160a01b0362010000840481169391169060ff6101009091041661047a565b8588604051806101a0016040528088815260200187815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525060405161046b959493929190610738565b60405180910390a15050505050565b6040805160a06020808301829052601960c08401527f78797a2e656c66692e73746f726167652e506f736974696f6e0000000000000060e0808501919091526001600160a01b03988916848601526060840197909752949096166080820152911515948201949094528351808203909301835261010001909252805191012090565b80356009811061050b57600080fd5b919050565b6040516101a0810167ffffffffffffffff8111828210171561054257634e487b7160e01b600052604160045260246000fd5b60405290565b60008060008084860361020081121561056057600080fd5b8535945060208601359350610577604087016104fc565b92506101a080605f198301121561058d57600080fd5b610595610510565b9150606087013582526080870135602083015260a0870135604083015260c0870135606083015260e087013560808301526101008088013560a08401526101208089013560c0850152610140808a013560e0860152610160808b0135848701526101809350838b013583870152848b0135828701526101c08b0135818701525050506101e08801358184015250508091505092959194509250565b6000806000806080858703121561064657600080fd5b843593506020850135925061065d604086016104fc565b9396929550929360600135925050565b60006020828403121561067f57600080fd5b5035919050565b80356001600160a01b038116811461050b57600080fd5b600080600080608085870312156106b357600080fd5b6106bc85610686565b9350602085013592506106d160408601610686565b9150606085013580151581146106e657600080fd5b939692955090935050565b600080600080600060a0868803121561070957600080fd5b8535945060208601359350610720604087016104fc565b94979396509394606081013594506080013592915050565b858152602081018590526104e081016009851061076557634e487b7160e01b600052602160045260246000fd5b8460408301528354606083015260018401546080830152600284015461079260a0840160ff831615159052565b6107a660c0840160ff8360081c1615159052565b6001600160a01b03601082901c1660e08401525060038401546001600160a01b03166001600160a01b0381166101008401525060048401546001600160a01b03166001600160a01b0381166101208401525060058401546101408301526006840154610160830152600784015461018083015260088401546101a083015260098401546101c0830152600a8401546101e0830152600b840154610200830152600c840154610220830152600d840154610240830152600e840154610260830152600f84015461028083015260108401546102a083015260118401546102c083015260128401546102e08301526013840154610300830152601484015461032083015282516103408301526020830151610360830152604083015161038083015260608301516103a083015260808301516103c083015260a08301516103e083015260c083015161040083015260e08301516104208301526101008301516104408301526101208301516104608301526101408301516104808301526101608301516104a08301526101808301516104c0830152969550505050505056fea2646970667358221220cc3cff6f6b4a878a4a50df3bc241f1b1ef4f801dc3686a481314ec5cef93b45464736f6c63430008190033","sourceMap":"213:4808:149:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;213:4808:149;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040526004361061009d5760003560e01c8063a51dafc711610070578063a51dafc714610191578063d06e0fe0146101a4578063f013b695146101c4578063f0350799146101eb578063f8d1ead6146101fc57600080fd5b80631a4c9a98146100a25780632ead7fcf146100c457806353dd3c54146100e45780636b38d0761461016b575b600080fd5b8180156100ae57600080fd5b506100c26100bd366004610548565b61020f565b005b8180156100d057600080fd5b506100c26100df366004610630565b61028a565b8180156100f057600080fd5b506100c26100ff36600461066d565b60006005820181905560068201819055600782018190556008820181905560098201819055600a8201819055600b8201819055600c820181905560138201819055600d8201819055600e8201819055600f82018190556010820181905560118201819055601290910155565b61017e61017936600461069d565b61035a565b6040519081526020015b60405180910390f35b6100c261019f36600461066d565b610374565b8180156101b057600080fd5b506100c26101bf3660046106f1565b61039c565b6101db6101d236600461066d565b60050154151590565b6040519015158152602001610188565b61017e6101f936600461066d565b90565b61017e61020a36600461069d565b61047a565b6002840154600185015460038601547fee2b9c77532fd89e66e2f431c2001e4bcc30fb5bc62ee9cdac252f89540067ae928692610268926001600160a01b0362010000840481169391169060ff6101009091041661047a565b84878560405161027c959493929190610738565b60405180910390a150505050565b6002840154600185015460038601547fee2b9c77532fd89e66e2f431c2001e4bcc30fb5bc62ee9cdac252f89540067ae9286926102e3926001600160a01b0362010000840481169391169060ff6101009091041661047a565b8487604051806101a001604052808781526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525060405161027c959493929190610738565b600061036b6101f98686868661047a565b95945050505050565b806005015460000361039957604051634a32858f60e01b815260040160405180910390fd5b50565b6002850154600186015460038701547fee2b9c77532fd89e66e2f431c2001e4bcc30fb5bc62ee9cdac252f89540067ae9287926103f5926001600160a01b0362010000840481169391169060ff6101009091041661047a565b8588604051806101a0016040528088815260200187815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525060405161046b959493929190610738565b60405180910390a15050505050565b6040805160a06020808301829052601960c08401527f78797a2e656c66692e73746f726167652e506f736974696f6e0000000000000060e0808501919091526001600160a01b03988916848601526060840197909752949096166080820152911515948201949094528351808203909301835261010001909252805191012090565b80356009811061050b57600080fd5b919050565b6040516101a0810167ffffffffffffffff8111828210171561054257634e487b7160e01b600052604160045260246000fd5b60405290565b60008060008084860361020081121561056057600080fd5b8535945060208601359350610577604087016104fc565b92506101a080605f198301121561058d57600080fd5b610595610510565b9150606087013582526080870135602083015260a0870135604083015260c0870135606083015260e087013560808301526101008088013560a08401526101208089013560c0850152610140808a013560e0860152610160808b0135848701526101809350838b013583870152848b0135828701526101c08b0135818701525050506101e08801358184015250508091505092959194509250565b6000806000806080858703121561064657600080fd5b843593506020850135925061065d604086016104fc565b9396929550929360600135925050565b60006020828403121561067f57600080fd5b5035919050565b80356001600160a01b038116811461050b57600080fd5b600080600080608085870312156106b357600080fd5b6106bc85610686565b9350602085013592506106d160408601610686565b9150606085013580151581146106e657600080fd5b939692955090935050565b600080600080600060a0868803121561070957600080fd5b8535945060208601359350610720604087016104fc565b94979396509394606081013594506080013592915050565b858152602081018590526104e081016009851061076557634e487b7160e01b600052602160045260246000fd5b8460408301528354606083015260018401546080830152600284015461079260a0840160ff831615159052565b6107a660c0840160ff8360081c1615159052565b6001600160a01b03601082901c1660e08401525060038401546001600160a01b03166001600160a01b0381166101008401525060048401546001600160a01b03166001600160a01b0381166101208401525060058401546101408301526006840154610160830152600784015461018083015260088401546101a083015260098401546101c0830152600a8401546101e0830152600b840154610200830152600c840154610220830152600d840154610240830152600e840154610260830152600f84015461028083015260108401546102a083015260118401546102c083015260128401546102e08301526013840154610300830152601484015461032083015282516103408301526020830151610360830152604083015161038083015260608301516103a083015260808301516103c083015260a08301516103e083015260c083015161040083015260e08301516104208301526101008301516104408301526101208301516104608301526101408301516104808301526101608301516104a08301526101808301516104c0830152969550505050505056fea2646970667358221220cc3cff6f6b4a878a4a50df3bc241f1b1ef4f801dc3686a481314ec5cef93b45464736f6c63430008190033","sourceMap":"213:4808:149:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4134:401;;;;;;;;;;-1:-1:-1;4134:401:149;;;;;:::i;:::-;;:::i;:::-;;3685:443;;;;;;;;;;-1:-1:-1;3685:443:149;;;;;:::i;:::-;;:::i;2966:713::-;;;;;;;;;;-1:-1:-1;2966:713:149;;;;;:::i;:::-;3031:1;3020:8;;;:12;;;3042:15;;;:19;;;3071:13;;;:17;;;3098:18;;;:22;;;3130:23;;;:27;;;3167:34;;;:38;;;3215:19;;;:23;;;3248:16;;;:34;;;3292:16;;;:20;;;3366:41;;;:45;;;3421:37;;;:41;;;3472:42;;;:46;;;3528:37;;;:41;;;3579:35;;;:39;;;3628:40;;;;:44;2966:713;2004:260;;;;;;:::i;:::-;;:::i;:::-;;;3611:25:181;;;3599:2;3584:18;2004:260:149;;;;;;;;2812:148;;;;;;:::i;:::-;;:::i;4541:478::-;;;;;;;;;;-1:-1:-1;4541:478:149;;;;;:::i;:::-;;:::i;2700:106::-;;;;;;:::i;:::-;2787:8;;;:12;;;2700:106;;;;4446:14:181;;4439:22;4421:41;;4409:2;4394:18;2700:106:149;4273:195:181;2270:133:149;;;;;;:::i;:::-;2384:3;2270:133;2409:285;;;;;;:::i;:::-;;:::i;4134:401::-;4394:12;;;;4408:11;;;;4421:16;;;;4323:205;;4356:9;;4379:79;;-1:-1:-1;;;;;4394:12:149;;;;;;4421:16;;;4439:18;4394:12;4439:18;;;;4379:14;:79::i;:::-;4472:4;4490;4508:10;4323:205;;;;;;;;;;:::i;:::-;;;;;;;;4134:401;;;;:::o;3685:443::-;3937:12;;;;3951:11;;;;3964:16;;;;3866:255;;3899:9;;3922:79;;-1:-1:-1;;;;;3937:12:149;;;;;;3964:16;;;3982:18;3937:12;3982:18;;;;3922:14;:79::i;:::-;4015:4;4033;4051:60;;;;;;;;4062:12;4051:60;;;;4076:1;4051:60;;;;4079:1;4051:60;;;;4082:1;4051:60;;;;4085:1;4051:60;;;;4088:1;4051:60;;;;4091:1;4051:60;;;;4094:1;4051:60;;;;4097:1;4051:60;;;;4100:1;4051:60;;;;4103:1;4051:60;;;;4106:1;4051:60;;;;4109:1;4051:60;;;3866:255;;;;;;;;;;:::i;2004:260::-;2151:22;2192:65;2197:59;2212:7;2221:6;2229:11;2242:13;2197:14;:59::i;2192:65::-;2185:72;2004:260;-1:-1:-1;;;;;2004:260:149:o;2812:148::-;2881:4;:8;;;2893:1;2881:13;2877:77;;2917:26;;-1:-1:-1;;;2917:26:149;;;;;;;;;;;2877:77;2812:148;:::o;4541:478::-;4822:12;;;;4836:11;;;;4849:16;;;;4751:261;;4784:9;;4807:79;;-1:-1:-1;;;;;4822:12:149;;;;;;4849:16;;;4867:18;4822:12;4867:18;;;;4807:14;:79::i;:::-;4900:4;4918;4936:66;;;;;;;;4947:12;4936:66;;;;4961:7;4936:66;;;;4970:1;4936:66;;;;4973:1;4936:66;;;;4976:1;4936:66;;;;4979:1;4936:66;;;;4982:1;4936:66;;;;4985:1;4936:66;;;;4988:1;4936:66;;;;4991:1;4936:66;;;;4994:1;4936:66;;;;4997:1;4936:66;;;;5000:1;4936:66;;;4751:261;;;;;;;;;;:::i;:::-;;;;;;;;4541:478;;;;;:::o;2409:285::-;2602:84;;;8818:3:181;2602:84:149;;;;8800:22:181;;;8859:2;8838:19;;;8831:31;8899:27;8878:19;;;;8871:56;;;;-1:-1:-1;;;;;9039:15:181;;;9017:20;;;9010:45;9071:18;;;9064:34;;;;9134:15;;;;-1:-1:-1;9114:18:181;;9107:43;9194:14;;9187:22;9166:19;;;9159:51;;;;2602:84:149;;;;;;;;;;8944:19:181;;2602:84:149;;;2592:95;;;;;;2409:285::o;14:159:181:-;98:20;;147:1;137:12;;127:40;;163:1;160;153:12;127:40;14:159;;;:::o;178:347::-;245:2;239:9;287:6;275:19;;324:18;309:34;;345:22;;;306:62;303:185;;;410:10;405:3;401:20;398:1;391:31;445:4;442:1;435:15;473:4;470:1;463:15;303:185;504:2;497:22;178:347;:::o;530:1553::-;694:6;702;710;718;762:9;753:7;749:23;792:3;788:2;784:12;781:32;;;809:1;806;799:12;781:32;845:9;832:23;822:33;;902:2;891:9;887:18;874:32;864:42;;925:54;975:2;964:9;960:18;925:54;:::i;:::-;915:64;;998:6;1038:2;1032;1028:7;1024:2;1020:16;1016:25;1013:45;;;1054:1;1051;1044:12;1013:45;1080:17;;:::i;:::-;1067:30;;1148:2;1137:9;1133:18;1120:32;1113:5;1106:47;1213:3;1202:9;1198:19;1185:33;1180:2;1173:5;1169:14;1162:57;1279:3;1268:9;1264:19;1251:33;1246:2;1239:5;1235:14;1228:57;1345:3;1334:9;1330:19;1317:33;1312:2;1305:5;1301:14;1294:57;1412:3;1401:9;1397:19;1384:33;1378:3;1371:5;1367:15;1360:58;1437:3;1501:2;1490:9;1486:18;1473:32;1467:3;1460:5;1456:15;1449:57;1525:3;1589:2;1578:9;1574:18;1561:32;1555:3;1548:5;1544:15;1537:57;1613:3;1677:2;1666:9;1662:18;1649:32;1643:3;1636:5;1632:15;1625:57;1701:3;1764:2;1753:9;1749:18;1736:32;1731:2;1724:5;1720:14;1713:56;1788:3;1778:13;;1851:2;1840:9;1836:18;1823:32;1818:2;1811:5;1807:14;1800:56;1916:2;1905:9;1901:18;1888:32;1883:2;1876:5;1872:14;1865:56;1981:3;1970:9;1966:19;1953:33;1948:2;1941:5;1937:14;1930:57;;;;2047:3;2036:9;2032:19;2019:33;2014:2;2007:5;2003:14;1996:57;;;2072:5;2062:15;;;530:1553;;;;;;;:::o;2088:456::-;2223:6;2231;2239;2247;2300:3;2288:9;2279:7;2275:23;2271:33;2268:53;;;2317:1;2314;2307:12;2268:53;2353:9;2340:23;2330:33;;2410:2;2399:9;2395:18;2382:32;2372:42;;2433:54;2483:2;2472:9;2468:18;2433:54;:::i;:::-;2088:456;;;;-1:-1:-1;2423:64:181;;2534:2;2519:18;2506:32;;-1:-1:-1;;2088:456:181:o;2549:205::-;2633:6;2686:2;2674:9;2665:7;2661:23;2657:32;2654:52;;;2702:1;2699;2692:12;2654:52;-1:-1:-1;2725:23:181;;2549:205;-1:-1:-1;2549:205:181:o;2759:173::-;2827:20;;-1:-1:-1;;;;;2876:31:181;;2866:42;;2856:70;;2922:1;2919;2912:12;2937:490;3020:6;3028;3036;3044;3097:3;3085:9;3076:7;3072:23;3068:33;3065:53;;;3114:1;3111;3104:12;3065:53;3137:29;3156:9;3137:29;:::i;:::-;3127:39;;3213:2;3202:9;3198:18;3185:32;3175:42;;3236:38;3270:2;3259:9;3255:18;3236:38;:::i;:::-;3226:48;;3324:2;3313:9;3309:18;3296:32;3371:5;3364:13;3357:21;3350:5;3347:32;3337:60;;3393:1;3390;3383:12;3337:60;2937:490;;;;-1:-1:-1;2937:490:181;;-1:-1:-1;;2937:490:181:o;3647:525::-;3791:6;3799;3807;3815;3823;3876:3;3864:9;3855:7;3851:23;3847:33;3844:53;;;3893:1;3890;3883:12;3844:53;3929:9;3916:23;3906:33;;3986:2;3975:9;3971:18;3958:32;3948:42;;4009:54;4059:2;4048:9;4044:18;4009:54;:::i;:::-;3647:525;;;;-1:-1:-1;3999:64:181;;4110:2;4095:18;;4082:32;;-1:-1:-1;4161:3:181;4146:19;4133:33;;3647:525;-1:-1:-1;;3647:525:181:o;6422:2083::-;6811:25;;;6867:2;6852:18;;6845:34;;;6797:4;6782:20;;6909:1;6898:13;;6888:144;;6954:10;6949:3;6945:20;6942:1;6935:31;6989:4;6986:1;6979:15;7017:4;7014:1;7007:15;6888:144;7068:6;7063:2;7052:9;7048:18;7041:34;7117:6;7111:13;7106:2;7095:9;7091:18;7084:41;7180:4;7172:6;7168:17;7162:24;7156:3;7145:9;7141:19;7134:53;7231:4;7223:6;7219:17;7213:24;7246:58;7299:3;7288:9;7284:19;7277:4;7266:9;7262:20;4247:13;4240:21;4228:34;;4177:91;7246:58;7313:66;7374:3;7363:9;7359:19;7352:4;7340:9;7337:1;7333:17;7329:28;4247:13;4240:21;4228:34;;4177:91;7313:66;-1:-1:-1;;;;;7415:2:181;7411:18;;;7407:44;7468:3;7453:19;;4902:44;-1:-1:-1;7563:4:181;7551:17;;7545:24;-1:-1:-1;;;;;5053:36:181;-1:-1:-1;;;;;4914:31:181;;7627:3;7612:19;;4902:44;-1:-1:-1;7724:4:181;7712:17;;7706:24;-1:-1:-1;;;;;5053:36:181;-1:-1:-1;;;;;4914:31:181;;7790:3;7775:19;;4902:44;-1:-1:-1;7850:4:181;7838:17;;7832:24;7826:3;7811:19;;7804:53;7912:4;7900:17;;7894:24;7888:3;7873:19;;7866:53;7974:4;7962:17;;7956:24;7950:3;7935:19;;7928:53;8036:1;8024:14;;8018:21;8012:3;7997:19;;7990:50;8095:1;8083:14;;8077:21;8071:3;8056:19;;8049:50;8154:4;8142:17;;8136:24;8130:3;8115:19;;8108:53;8216:4;8204:17;;8198:24;8192:3;8177:19;;8170:53;8282:4;8270:17;;5185:12;8304:3;8289:19;;5173:25;5236:16;;;5230:23;5214:14;;;5207:47;5292:16;;;5286:23;5270:14;;;5263:47;5348:16;;;5342:23;5326:14;;;5319:47;5404:16;;;5398:23;5382:14;;;5375:47;5460:16;;;5454:23;5438:14;;;5431:47;5516:16;;;5510:23;5494:14;;;5487:47;8364:4;8352:17;;8346:24;8340:3;8325:19;;8318:53;8426:4;8414:17;;8408:24;8402:3;8387:19;;8380:53;5621:12;;8494:3;8479:19;;5609:25;5683:4;5672:16;;5666:23;5650:14;;;5643:47;5739:4;5728:16;;5722:23;5706:14;;;5699:47;5795:4;5784:16;;5778:23;5762:14;;;5755:47;5851:4;5840:16;;5834:23;5818:14;;;5811:47;5907:4;5896:16;;5890:23;5874:14;;;5867:47;5963:4;5952:16;;5946:23;5930:14;;;5923:47;6019:4;6008:16;;6002:23;5986:14;;;5979:47;6045:6;6087:14;;6081:21;6067:12;;;6060:43;6122:6;6164:14;;6158:21;6144:12;;;6137:43;6199:6;6241:14;;6235:21;6221:12;;;6214:43;6276:6;6318:14;;6312:21;6298:12;;;6291:43;6353:6;6395:14;;6389:21;6375:12;;;6368:43;6422:2083;;;;;;;;:::o","linkReferences":{}},"methodIdentifiers":{"checkExists(Position.Props storage)":"a51dafc7","emitOpenPositionUpdateEvent(Position.Props storage,uint256,Position.PositionUpdateFrom,uint256,uint256)":"d06e0fe0","emitPositionUpdateEvent(Position.Props storage,uint256,Position.PositionUpdateFrom,Position.SettleData)":"1a4c9a98","emitPositionUpdateEvent(Position.Props storage,uint256,Position.PositionUpdateFrom,uint256)":"2ead7fcf","getPositionKey(address,bytes32,address,bool)":"f8d1ead6","hasPosition(Position.Props storage)":"f013b695","load(address,bytes32,address,bool)":"6b38d076","load(bytes32)":"f0350799","reset(Position.Props storage)":"53dd3c54"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.25+commit.b61c2a91\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"PositionNotExists\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"requestId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"positionKey\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"enum Position.PositionUpdateFrom\",\"name\":\"from\",\"type\":\"uint8\"},{\"components\":[{\"internalType\":\"bytes32\",\"name\":\"key\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"symbol\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"isCrossMargin\",\"type\":\"bool\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"marginToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"indexToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"qty\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"entryPrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"leverage\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"initialMargin\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"initialMarginInUsd\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"initialMarginInUsdFromBalance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"holdPoolAmount\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"closeFeeInUsd\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"openBorrowingFeePerToken\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"realizedBorrowingFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"realizedBorrowingFeeInUsd\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"openFundingFeePerQty\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"realizedFundingFee\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"realizedFundingFeeInUsd\",\"type\":\"int256\"}],\"internalType\":\"struct Position.PositionFee\",\"name\":\"positionFee\",\"type\":\"tuple\"},{\"internalType\":\"int256\",\"name\":\"realizedPnl\",\"type\":\"int256\"},{\"internalType\":\"uint256\",\"name\":\"lastUpdateTime\",\"type\":\"uint256\"}],\"indexed\":false,\"internalType\":\"struct Position.Props\",\"name\":\"position\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"executePrice\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"openFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"marginTokenPrice\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"settledMargin\",\"type\":\"int256\"},{\"internalType\":\"uint256\",\"name\":\"settledBorrowingFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"settledBorrowingFeeInUsd\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"settledFundingFee\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"settledFundingFeeInUsd\",\"type\":\"int256\"},{\"internalType\":\"uint256\",\"name\":\"unHoldPoolAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"closeFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"closeFeeInUsd\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"realizedPnl\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"poolPnlToken\",\"type\":\"int256\"}],\"indexed\":false,\"internalType\":\"struct Position.SettleData\",\"name\":\"settleData\",\"type\":\"tuple\"}],\"name\":\"PositionUpdateEvent\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"symbol\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"marginToken\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isCrossMargin\",\"type\":\"bool\"}],\"name\":\"getPositionKey\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/storage/Position.sol\":\"Position\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@chainlink/contracts/=lib/@chainlink/contracts/\",\":@chimera/=lib/chimera/src/\",\":@eth-optimism/=lib/@chainlink/contracts/node_modules/@eth-optimism/contracts/\",\":@openzeppelin/contracts/=lib/@openzeppelin/contracts/\",\":@uniswap/=lib/@uniswap/\",\":base64-sol/=lib/base64-sol/\",\":chimera/=lib/chimera/src/\",\":ds-test/=lib/chimera/lib/forge-std/lib/ds-test/src/\",\":eth-gas-reporter/=lib/eth-gas-reporter/\",\":forge-std/=lib/forge-std/src/\",\":hardhat-deploy/=lib/hardhat-deploy/\",\":hardhat/=lib/hardhat/\"]},\"sources\":{\"lib/@openzeppelin/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x52a8cfb0f5239d11b457dcdd1b326992ef672714ca8da71a157255bddd13f3ad\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://495145362c7ff1c9ca88c58bbbbcb412e3c2004406647412394486552ff6c278\",\"dweb:/ipfs/QmNNCeng6d5eRPDn6tkWSQhjE39XWfQEfjA63rRwHmr1iH\"]},\"lib/@openzeppelin/contracts/utils/structs/EnumerableSet.sol\":{\"keccak256\":\"0x9f4357008a8f7d8c8bf5d48902e789637538d8c016be5766610901b4bba81514\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://20bf19b2b851f58a4c24543de80ae70b3e08621f9230eb335dc75e2d4f43f5df\",\"dweb:/ipfs/QmSYuH1AhvJkPK8hNvoPqtExBcgTB42pPRHgTHkS5c5zYW\"]},\"src/storage/Position.sol\":{\"keccak256\":\"0xa87d44cd70e69328a9c5bf87165896f2c0c8241b7029674332913aaa89752e9d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://3eb5fdac8e918c8a8e9ca0e5438d54b72d000404ec10b1aad1b08debd6f7d564\",\"dweb:/ipfs/QmQa1fRxDTeSN9XLFVQct7ycTGwugjsjhLnU7pVq9MCcXG\"]},\"src/utils/Errors.sol\":{\"keccak256\":\"0xcf8f46def20484f18354206e3eab5d50c7c3c26dca95835dcd8694b1815107ec\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://2761e55ce01115a33cda118ef40b8eed807556a2080bc31cb6655cd1ba6b5ca3\",\"dweb:/ipfs/Qmdfhn58XyDuaxwUupcaduPhMCD5YkTxmSLmWjhhMKBitp\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.25+commit.b61c2a91"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"PositionNotExists"},{"inputs":[{"internalType":"uint256","name":"requestId","type":"uint256","indexed":false},{"internalType":"bytes32","name":"positionKey","type":"bytes32","indexed":false},{"internalType":"enum Position.PositionUpdateFrom","name":"from","type":"uint8","indexed":false},{"internalType":"struct Position.Props","name":"position","type":"tuple","components":[{"internalType":"bytes32","name":"key","type":"bytes32"},{"internalType":"bytes32","name":"symbol","type":"bytes32"},{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"bool","name":"isCrossMargin","type":"bool"},{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"marginToken","type":"address"},{"internalType":"address","name":"indexToken","type":"address"},{"internalType":"uint256","name":"qty","type":"uint256"},{"internalType":"uint256","name":"entryPrice","type":"uint256"},{"internalType":"uint256","name":"leverage","type":"uint256"},{"internalType":"uint256","name":"initialMargin","type":"uint256"},{"internalType":"uint256","name":"initialMarginInUsd","type":"uint256"},{"internalType":"uint256","name":"initialMarginInUsdFromBalance","type":"uint256"},{"internalType":"uint256","name":"holdPoolAmount","type":"uint256"},{"internalType":"struct Position.PositionFee","name":"positionFee","type":"tuple","components":[{"internalType":"uint256","name":"closeFeeInUsd","type":"uint256"},{"internalType":"uint256","name":"openBorrowingFeePerToken","type":"uint256"},{"internalType":"uint256","name":"realizedBorrowingFee","type":"uint256"},{"internalType":"uint256","name":"realizedBorrowingFeeInUsd","type":"uint256"},{"internalType":"int256","name":"openFundingFeePerQty","type":"int256"},{"internalType":"int256","name":"realizedFundingFee","type":"int256"},{"internalType":"int256","name":"realizedFundingFeeInUsd","type":"int256"}]},{"internalType":"int256","name":"realizedPnl","type":"int256"},{"internalType":"uint256","name":"lastUpdateTime","type":"uint256"}],"indexed":false},{"internalType":"struct Position.SettleData","name":"settleData","type":"tuple","components":[{"internalType":"uint256","name":"executePrice","type":"uint256"},{"internalType":"uint256","name":"openFee","type":"uint256"},{"internalType":"uint256","name":"marginTokenPrice","type":"uint256"},{"internalType":"int256","name":"settledMargin","type":"int256"},{"internalType":"uint256","name":"settledBorrowingFee","type":"uint256"},{"internalType":"uint256","name":"settledBorrowingFeeInUsd","type":"uint256"},{"internalType":"int256","name":"settledFundingFee","type":"int256"},{"internalType":"int256","name":"settledFundingFeeInUsd","type":"int256"},{"internalType":"uint256","name":"unHoldPoolAmount","type":"uint256"},{"internalType":"uint256","name":"closeFee","type":"uint256"},{"internalType":"uint256","name":"closeFeeInUsd","type":"uint256"},{"internalType":"int256","name":"realizedPnl","type":"int256"},{"internalType":"int256","name":"poolPnlToken","type":"int256"}],"indexed":false}],"type":"event","name":"PositionUpdateEvent","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bytes32","name":"symbol","type":"bytes32"},{"internalType":"address","name":"marginToken","type":"address"},{"internalType":"bool","name":"isCrossMargin","type":"bool"}],"stateMutability":"pure","type":"function","name":"getPositionKey","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@chainlink/contracts/=lib/@chainlink/contracts/","@chimera/=lib/chimera/src/","@eth-optimism/=lib/@chainlink/contracts/node_modules/@eth-optimism/contracts/","@openzeppelin/contracts/=lib/@openzeppelin/contracts/","@uniswap/=lib/@uniswap/","base64-sol/=lib/base64-sol/","chimera/=lib/chimera/src/","ds-test/=lib/chimera/lib/forge-std/lib/ds-test/src/","eth-gas-reporter/=lib/eth-gas-reporter/","forge-std/=lib/forge-std/src/","hardhat-deploy/=lib/hardhat-deploy/","hardhat/=lib/hardhat/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/storage/Position.sol":"Position"},"evmVersion":"paris","libraries":{}},"sources":{"lib/@openzeppelin/contracts/utils/math/SafeCast.sol":{"keccak256":"0x52a8cfb0f5239d11b457dcdd1b326992ef672714ca8da71a157255bddd13f3ad","urls":["bzz-raw://495145362c7ff1c9ca88c58bbbbcb412e3c2004406647412394486552ff6c278","dweb:/ipfs/QmNNCeng6d5eRPDn6tkWSQhjE39XWfQEfjA63rRwHmr1iH"],"license":"MIT"},"lib/@openzeppelin/contracts/utils/structs/EnumerableSet.sol":{"keccak256":"0x9f4357008a8f7d8c8bf5d48902e789637538d8c016be5766610901b4bba81514","urls":["bzz-raw://20bf19b2b851f58a4c24543de80ae70b3e08621f9230eb335dc75e2d4f43f5df","dweb:/ipfs/QmSYuH1AhvJkPK8hNvoPqtExBcgTB42pPRHgTHkS5c5zYW"],"license":"MIT"},"src/storage/Position.sol":{"keccak256":"0xa87d44cd70e69328a9c5bf87165896f2c0c8241b7029674332913aaa89752e9d","urls":["bzz-raw://3eb5fdac8e918c8a8e9ca0e5438d54b72d000404ec10b1aad1b08debd6f7d564","dweb:/ipfs/QmQa1fRxDTeSN9XLFVQct7ycTGwugjsjhLnU7pVq9MCcXG"],"license":"MIT"},"src/utils/Errors.sol":{"keccak256":"0xcf8f46def20484f18354206e3eab5d50c7c3c26dca95835dcd8694b1815107ec","urls":["bzz-raw://2761e55ce01115a33cda118ef40b8eed807556a2080bc31cb6655cd1ba6b5ca3","dweb:/ipfs/Qmdfhn58XyDuaxwUupcaduPhMCD5YkTxmSLmWjhhMKBitp"],"license":"MIT"}},"version":1},"id":149}